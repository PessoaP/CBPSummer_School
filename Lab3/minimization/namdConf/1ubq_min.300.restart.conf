#############################################################
## ADJUSTABLE PARAMETERS                                   ##
#############################################################

structure         ../molPdbPsf/1ubq.psf
coordinates       ../molPdbPsf/1ubq.pdb

set outputname     1ubq_minimization
outputName         $outputname

set temperature    300 

# Continuing a job from the restart files
set inputname      1ubq_minimization

firsttimestep      0

#############################################################
## SIMULATION PARAMETERS                                   ##
#############################################################

# Input
paraTypeCharmm      on
parameters         ../toppar/par_all27_prot_lipid.prm
parameters         ../toppar/par_all36m_prot.prm
parameters         ../toppar/par_all36_prot.prm
parameters         ../toppar/par_all36_carb.prm
parameters         ../toppar/par_all36_cgenff.prm
parameters         ../toppar/par_all36_lipid.prm
parameters         ../toppar/par_all36_na.prm
parameters         ../toppar/toppar_water_ions_namd_2.str


temperature         $temperature

wrapWater           on
wrapAll             on

zeroMomentum        yes

# Force-Field Parameters
exclude             scaled1-4
1-4scaling          1.0
cutoff              12.
switching           on
switchdist          10.
pairlistdist        13.5


# Integrator Parameters
timestep            2.0  ;# 2fs/step
rigidBonds          all  ;# needed for 2fs steps
nonbondedFreq       1
fullElectFrequency  1
stepspercycle       10


#PME (for full-system periodic electrostatics)
cellBasisVector1 40.67700004577637 0 0
cellBasisVector2 0 42.284000396728516 0
cellBasisVector3 0 0 46.222999572753906
cellOrigin 0.5418038964271545 0.2780885398387909 2.4441280364990234

PME                 yes
PMEGridSpacing      1.0


# Constant Temperature Control
langevin            on    ;# do langevin dynamics
langevinDamping     1     ;# damping coefficient (gamma) of 5/ps
langevinTemp        $temperature

# Constant Pressure Control (variable volume)
useGroupPressure      yes  ;# needed for 2fs steps
useFlexibleCell       no   ;# no for water box, yes for membrane
useConstantArea       no   ;# no for water box, yes for membrane

langevinPiston        on
langevinPistonTarget  1.01325 ;#  in bar -> 1 atm
langevinPistonPeriod  200.
langevinPistonDecay   50.
langevinPistonTemp    $temperature

restartfreq         1000     ;# 1000steps = every 2ps
dcdfreq             1000
veldcdfreq          1000
xstFreq             1000
outputEnergies      1000
outputPressure      1000


minimize            1000
reinitvels          $temperature

run 250000 
